{"ast":null,"code":"var _jsxFileName = \"/Users/maclaptop/Documents/GitHub/ashokpandey.com/src/components/resources.js\";\nimport FiltersDesktop from './Essentials/essentialsfiltersdesktop';\nimport FiltersMobile from './Essentials/essentialsfiltersmobile';\nimport { getSuggestions } from './Essentials/essentialsutls';\nimport ResourceTable from './resourcetable';\nimport { Fab, Fade } from '@material-ui/core';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\nimport axios from 'axios';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport * as Icon from 'react-feather';\nimport { Helmet } from 'react-helmet';\nimport { useDebounce } from 'react-use';\n\nfunction Resources(props) {\n  const [data, setData] = useState([]);\n  const [partData, setPartData] = useState([]);\n  const [ogData, setOgData] = useState([]);\n  const [fetched, setFetched] = useState(false);\n  const [city, setCity] = useState('all');\n  const [category, setCategory] = useState('all');\n  const [indianstate, setIndianState] = useState('all');\n  const [resourcedict, setResourceDict] = useState({});\n  const [showTable, setShowTable] = useState(false);\n  const [isDesktop, setIsDesktop] = useState(false);\n  const [hasScrolled, setHasScrolled] = useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [searchValue, setSearchValue] = useState('');\n  useEffect(() => {\n    if (fetched === false) {\n      getResources();\n    }\n  }, [fetched, data, resourcedict]);\n  const checkForResizeEvent = useCallback(event => {\n    if (window.innerWidth > 639) setIsDesktop(true);else setIsDesktop(false);\n  }, []);\n  useEffect(() => {\n    if (window.innerWidth > 639) setIsDesktop(true);else setIsDesktop(false);\n    window.addEventListener('resize', checkForResizeEvent);\n    return () => {\n      window.removeEventListener('resize', checkForResizeEvent);\n    };\n  }, [isDesktop, checkForResizeEvent]);\n  const checkScrollEvent = useCallback(event => {\n    window.pageYOffset > 100 ? setHasScrolled(true) : setHasScrolled(false);\n  }, []);\n  useEffect(() => {\n    window.pageYOffset > 100 ? setHasScrolled(true) : setHasScrolled(false);\n    window.addEventListener('scroll', checkScrollEvent);\n    return () => {\n      window.removeEventListener('scroll', checkScrollEvent);\n    };\n  }, [hasScrolled, checkScrollEvent]);\n\n  const getResources = async () => {\n    try {\n      const [response] = await Promise.all([axios.get('https://api.covid19india.org/resources/resources.json')]); // setData(response.data.resources);\n\n      const hashmap = {};\n      response.data.resources.forEach(x => {\n        if (typeof hashmap[x['state']] === 'undefined') hashmap[x['state']] = {};\n        if (typeof hashmap[x['state']][x['city']] === 'undefined') hashmap[x['state']][x['city']] = {};\n        if (typeof hashmap[x['state']][x['city']][x['category']] === 'undefined') hashmap[x['state']][x['city']][x['category']] = [];\n        if (Array.isArray(hashmap[x['state']][x['city']][x['category']])) hashmap[x['state']][x['city']][x['category']].push(x);\n      });\n      setResourceDict(hashmap); // setIndianState(Object.keys()[0]);\n\n      setFetched(true);\n    } catch (err) {}\n  };\n\n  const handleDisclaimerClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleDisclaimerClose = () => {\n    setAnchorEl(null);\n  };\n\n  const isDisclaimerOpen = Boolean(anchorEl);\n  const id = isDisclaimerOpen ? 'simple-popover' : undefined;\n\n  function animateScroll() {\n    document.body.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    }); // For Safari\n\n    document.documentElement.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    }); // For Chrome, Firefox, IE and Opera\n  }\n\n  const memocols = React.useMemo(() => [{\n    Header: 'City',\n    accessor: 'city'\n  }, {\n    Header: 'Category',\n    accessor: 'category'\n  }, {\n    Header: 'Organisation',\n    accessor: 'nameoftheorganisation'\n  }, {\n    Header: 'Description',\n    accessor: 'descriptionandorserviceprovided'\n  }, {\n    Header: 'Phone',\n    accessor: 'phonenumber'\n  }, {\n    Header: 'Source',\n    accessor: 'contact',\n    isVisible: false\n  }], []); // const memodata = React.useMemo(() => data, [data])\n\n  const getCityOptions = function () {\n    if (indianstate) {\n      if (indianstate === 'all') return [];else {\n        return Object.keys(resourcedict[indianstate]).sort().map((x, i) => /*#__PURE__*/React.createElement(\"option\", {\n          key: i,\n          value: x,\n          style: {\n            fontFamily: 'archia',\n            fontSize: '11px !important',\n            fontWeight: 600,\n            textTransform: 'uppercase'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }\n        }, x));\n      }\n    } else return []; // return getCityList().map((x) => <option value={x}>{x}</option>)\n\n  };\n\n  const getIndianStateOptions = function () {\n    // let defaultOption = ['Please select']\n    return Object.keys(resourcedict).sort().map((x, i) => /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: x,\n      style: {\n        fontFamily: 'archia',\n        fontSize: '11px !important',\n        fontWeight: 600,\n        textTransform: 'uppercase'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, x));\n  };\n\n  const getCategoryOptions = function () {\n    if (indianstate && city) {\n      if (indianstate === 'all') {\n        const array = [];\n        Object.values(resourcedict).forEach(state => {\n          Object.values(state).forEach(citydata => {\n            Object.keys(citydata).forEach(x => {\n              if (array.indexOf(x) === -1) array.push(x);\n            });\n          });\n        });\n        return array.sort().map((x, i) => /*#__PURE__*/React.createElement(\"option\", {\n          key: i,\n          value: x,\n          style: {\n            fontFamily: 'archia',\n            fontSize: '11px !important',\n            fontWeight: 600,\n            textTransform: 'uppercase'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 11\n          }\n        }, x));\n      } else {\n        if (city === 'all') {\n          const array = [];\n          Object.values(resourcedict[indianstate]).forEach(citydata => {\n            Object.keys(citydata).forEach(x => {\n              if (array.indexOf(x) === -1) array.push(x);\n            });\n          });\n          return array.sort().map((x, i) => /*#__PURE__*/React.createElement(\"option\", {\n            key: i,\n            value: x,\n            style: {\n              fontFamily: 'archia',\n              fontSize: '11px !important',\n              fontWeight: 600,\n              textTransform: 'uppercase'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 13\n            }\n          }, x));\n        } else {\n          return Object.keys(resourcedict[indianstate][city]).sort().map((x, i) => /*#__PURE__*/React.createElement(\"option\", {\n            key: i,\n            value: x,\n            style: {\n              fontFamily: 'archia',\n              fontSize: '11px !important',\n              fontWeight: 600,\n              textTransform: 'uppercase'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }\n          }, x));\n        }\n      }\n    } else return [];\n  };\n\n  const filterTable = function () {\n    let a = [];\n\n    if (category === 'all') {\n      if (city === 'all') {\n        if (indianstate === 'all') {\n          Object.values(resourcedict).forEach(state => {\n            Object.values(state).forEach(citydata => {\n              Object.values(citydata).forEach(category => {\n                category.forEach(x => a.push(x));\n              });\n            });\n          });\n        } else {\n          Object.values(resourcedict[indianstate]).forEach(citydata => {\n            Object.values(citydata).forEach(category => {\n              category.forEach(x => a.push(x));\n            });\n          });\n        }\n      } else {\n        Object.values(resourcedict[indianstate][city]).forEach(x => {\n          x.forEach(y => a.push(y));\n        });\n      }\n    } else {\n      if (indianstate === 'all' && city === 'all') {\n        Object.values(resourcedict).forEach(state => {\n          Object.values(state).forEach(citydata => {\n            Object.values(citydata).forEach(categorydata => {\n              categorydata.forEach(x => {\n                if (x.category === category) a.push(x);\n              });\n            });\n          });\n        });\n      } else if (indianstate !== 'all' && city === 'all') {\n        Object.values(resourcedict[indianstate]).forEach(citydata => {\n          if (category in citydata) {\n            citydata[category].forEach(x => {\n              a.push(x);\n            });\n          }\n        });\n      } else {\n        a = resourcedict[indianstate][city][category];\n      }\n    }\n\n    try {\n      if ('PAN India' in resourcedict) {\n        resourcedict['PAN India']['Multiple']['CoVID-19 Testing Lab'].forEach(element => {\n          a.push(element);\n        });\n      }\n    } catch (err) {}\n\n    setData(a);\n    setOgData(a);\n    setPartData(a.slice(0, 30));\n    setShowTable(true);\n\n    try {\n      document.getElementById('input-field-searchbar').value = '';\n    } catch {}\n\n    setSearchValue('');\n  };\n\n  const changeIndianState = function (changedstateevent) {\n    setIndianState(changedstateevent.target.value); // setCity(\n    //   Object.keys(resourcedict[changedstateevent.target.value]).sort()[0]\n    // );\n\n    if (changedstateevent.target.value === '') {\n      setCity('');\n      document.getElementById('cityselect1').selectedIndex = 0;\n      setCategory('');\n      document.getElementById('categoryselect').selectedIndex = 0;\n    } else {\n      setCity('all');\n      document.getElementById('cityselect1').selectedIndex = 1;\n      setCategory('all');\n      document.getElementById('categoryselect').selectedIndex = 1;\n    }\n  };\n\n  const changeCity = function (changedcityevent) {\n    setCity(changedcityevent.target.value);\n    setCategory('all');\n    document.getElementById('categoryselect').selectedIndex = 1;\n  };\n\n  const changeCategory = function (changedcategoryevent) {\n    setCategory(changedcategoryevent.target.value);\n  };\n\n  const appendData = function () {\n    const tempArr = partData.concat(data.slice(partData.length, partData.length + 30));\n    setPartData(tempArr);\n  };\n\n  const openSharingLink = function (message) {\n    const shareUri = `https://www.addtoany.com/share#url=${encodeURI('https://www.covid19india.org/essentials')}&title=${encodeURI(message)}`;\n    const h = 500;\n    const w = 500;\n    const left = window.screen.width / 2 - w / 2;\n    const top = window.screen.height / 2 - h / 2;\n    return window.open(shareUri, document.title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left);\n  };\n\n  const openSharingTray = function () {\n    const message = 'Discover nearest coronavirus support and essential service providers such as testing lab centres, accommodation shelters and vegetable vendors at ';\n\n    if (navigator.share !== undefined) {\n      navigator.share({\n        title: document.title,\n        text: message,\n        url: 'https://www.covid19india.org/essentials'\n      }).then().catch(error => {});\n    } else {\n      openSharingLink(message);\n    }\n  };\n\n  useDebounce(() => {\n    const newData = getSuggestions(searchValue, ogData);\n    setData(newData);\n    setPartData(newData.slice(0, 30));\n  }, 300, [searchValue, ogData]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Resources\",\n    id: \"top-elem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 9\n    }\n  }, \"Essentials - covid19india.org\"), /*#__PURE__*/React.createElement(\"meta\", {\n    name: \"title\",\n    content: \"Essentials - covid19india.org\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filtersection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filtertitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 11\n    }\n  }, \"Service Before Self\")), !isDesktop && /*#__PURE__*/React.createElement(FiltersMobile, {\n    handleDisclaimerClick: handleDisclaimerClick,\n    popoverid: id,\n    isDisclaimerOpen: isDisclaimerOpen,\n    anchorEl: anchorEl,\n    handleDisclaimerClose: handleDisclaimerClose,\n    indianstate: indianstate,\n    changeIndianState: changeIndianState,\n    stateoptions: getIndianStateOptions(),\n    city: city,\n    changeCity: changeCity,\n    cityoptions: getCityOptions(),\n    category: category,\n    changeCategory: changeCategory,\n    servicesoptions: getCategoryOptions(),\n    filterTable: filterTable,\n    openSharingTray: openSharingTray,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 11\n    }\n  }), isDesktop && /*#__PURE__*/React.createElement(FiltersDesktop, {\n    handleDisclaimerClick: handleDisclaimerClick,\n    popoverid: id,\n    isDisclaimerOpen: isDisclaimerOpen,\n    anchorEl: anchorEl,\n    handleDisclaimerClose: handleDisclaimerClose,\n    indianstate: indianstate,\n    changeIndianState: changeIndianState,\n    stateoptions: getIndianStateOptions(),\n    city: city,\n    changeCity: changeCity,\n    cityoptions: getCityOptions(),\n    category: category,\n    changeCategory: changeCategory,\n    servicesoptions: getCategoryOptions(),\n    filterTable: filterTable,\n    openSharingTray: openSharingTray,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 11\n    }\n  })), showTable && /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searchbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"input-field-searchbar\",\n    label: \"Search keyword\",\n    fullWidth: true,\n    InputLabelProps: {\n      shrink: true\n    },\n    style: {\n      width: '100%'\n    },\n    variant: \"outlined\",\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Icon.Search, {\n        size: \"0.9em\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 21\n        }\n      }))\n    },\n    onChange: event => {\n      setInterval(setSearchValue(event.target.value));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(ResourceTable, {\n    columns: memocols,\n    data: partData,\n    totalCount: data.length,\n    isDesktop: isDesktop,\n    onScrollUpdate: appendData,\n    searchValue: searchValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Fade, {\n    in: hasScrolled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    color: \"inherit\",\n    \"aria-label\": \"gototop\",\n    id: \"gototopbtn\",\n    onClick: animateScroll,\n    size: \"small\",\n    style: {\n      position: 'fixed',\n      bottom: '1rem',\n      right: '1rem',\n      zIndex: '1000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Icon.Navigation2, {\n    strokeWidth: \"2.5\",\n    color: \"#4c75f2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 17\n    }\n  }))))));\n}\n\nexport default Resources;","map":{"version":3,"sources":["/Users/maclaptop/Documents/GitHub/ashokpandey.com/src/components/resources.js"],"names":["FiltersDesktop","FiltersMobile","getSuggestions","ResourceTable","Fab","Fade","InputAdornment","TextField","axios","React","useState","useEffect","useCallback","Icon","Helmet","useDebounce","Resources","props","data","setData","partData","setPartData","ogData","setOgData","fetched","setFetched","city","setCity","category","setCategory","indianstate","setIndianState","resourcedict","setResourceDict","showTable","setShowTable","isDesktop","setIsDesktop","hasScrolled","setHasScrolled","anchorEl","setAnchorEl","searchValue","setSearchValue","getResources","checkForResizeEvent","event","window","innerWidth","addEventListener","removeEventListener","checkScrollEvent","pageYOffset","response","Promise","all","get","hashmap","resources","forEach","x","Array","isArray","push","err","handleDisclaimerClick","currentTarget","handleDisclaimerClose","isDisclaimerOpen","Boolean","id","undefined","animateScroll","document","body","scrollTo","top","behavior","documentElement","memocols","useMemo","Header","accessor","isVisible","getCityOptions","Object","keys","sort","map","i","fontFamily","fontSize","fontWeight","textTransform","getIndianStateOptions","getCategoryOptions","array","values","state","citydata","indexOf","filterTable","a","y","categorydata","element","slice","getElementById","value","changeIndianState","changedstateevent","target","selectedIndex","changeCity","changedcityevent","changeCategory","changedcategoryevent","appendData","tempArr","concat","length","openSharingLink","message","shareUri","encodeURI","h","w","left","screen","width","height","open","title","openSharingTray","navigator","share","text","url","then","catch","error","newData","shrink","startAdornment","setInterval","position","bottom","right","zIndex"],"mappings":"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","sourcesContent":["import FiltersDesktop from './Essentials/essentialsfiltersdesktop';\nimport FiltersMobile from './Essentials/essentialsfiltersmobile';\nimport {getSuggestions} from './Essentials/essentialsutls';\nimport ResourceTable from './resourcetable';\n\nimport {Fab, Fade} from '@material-ui/core';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\nimport axios from 'axios';\nimport React, {useState, useEffect, useCallback} from 'react';\nimport * as Icon from 'react-feather';\nimport {Helmet} from 'react-helmet';\nimport {useDebounce} from 'react-use';\n\nfunction Resources(props) {\n  const [data, setData] = useState([]);\n  const [partData, setPartData] = useState([]);\n  const [ogData, setOgData] = useState([]);\n  const [fetched, setFetched] = useState(false);\n  const [city, setCity] = useState('all');\n  const [category, setCategory] = useState('all');\n  const [indianstate, setIndianState] = useState('all');\n  const [resourcedict, setResourceDict] = useState({});\n  const [showTable, setShowTable] = useState(false);\n  const [isDesktop, setIsDesktop] = useState(false);\n  const [hasScrolled, setHasScrolled] = useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [searchValue, setSearchValue] = useState('');\n\n  useEffect(() => {\n    if (fetched === false) {\n      getResources();\n    }\n  }, [fetched, data, resourcedict]);\n\n  const checkForResizeEvent = useCallback((event) => {\n    if (window.innerWidth > 639) setIsDesktop(true);\n    else setIsDesktop(false);\n  }, []);\n\n  useEffect(() => {\n    if (window.innerWidth > 639) setIsDesktop(true);\n    else setIsDesktop(false);\n    window.addEventListener('resize', checkForResizeEvent);\n    return () => {\n      window.removeEventListener('resize', checkForResizeEvent);\n    };\n  }, [isDesktop, checkForResizeEvent]);\n\n  const checkScrollEvent = useCallback((event) => {\n    window.pageYOffset > 100 ? setHasScrolled(true) : setHasScrolled(false);\n  }, []);\n\n  useEffect(() => {\n    window.pageYOffset > 100 ? setHasScrolled(true) : setHasScrolled(false);\n    window.addEventListener('scroll', checkScrollEvent);\n    return () => {\n      window.removeEventListener('scroll', checkScrollEvent);\n    };\n  }, [hasScrolled, checkScrollEvent]);\n\n  const getResources = async () => {\n    try {\n      const [response] = await Promise.all([\n        axios.get('https://api.covid19india.org/resources/resources.json'),\n      ]);\n      // setData(response.data.resources);\n      const hashmap = {};\n      response.data.resources.forEach((x) => {\n        if (typeof hashmap[x['state']] === 'undefined')\n          hashmap[x['state']] = {};\n        if (typeof hashmap[x['state']][x['city']] === 'undefined')\n          hashmap[x['state']][x['city']] = {};\n        if (\n          typeof hashmap[x['state']][x['city']][x['category']] === 'undefined'\n        )\n          hashmap[x['state']][x['city']][x['category']] = [];\n        if (Array.isArray(hashmap[x['state']][x['city']][x['category']]))\n          hashmap[x['state']][x['city']][x['category']].push(x);\n      });\n\n      setResourceDict(hashmap);\n      // setIndianState(Object.keys()[0]);\n\n      setFetched(true);\n    } catch (err) {}\n  };\n\n  const handleDisclaimerClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleDisclaimerClose = () => {\n    setAnchorEl(null);\n  };\n\n  const isDisclaimerOpen = Boolean(anchorEl);\n  const id = isDisclaimerOpen ? 'simple-popover' : undefined;\n\n  function animateScroll() {\n    document.body.scrollTo({top: 0, behavior: 'smooth'}); // For Safari\n    document.documentElement.scrollTo({top: 0, behavior: 'smooth'}); // For Chrome, Firefox, IE and Opera\n  }\n\n  const memocols = React.useMemo(\n    () => [\n      {\n        Header: 'City',\n        accessor: 'city',\n      },\n      {\n        Header: 'Category',\n        accessor: 'category',\n      },\n      {\n        Header: 'Organisation',\n        accessor: 'nameoftheorganisation',\n      },\n      {\n        Header: 'Description',\n        accessor: 'descriptionandorserviceprovided',\n      },\n      {\n        Header: 'Phone',\n        accessor: 'phonenumber',\n      },\n      {\n        Header: 'Source',\n        accessor: 'contact',\n        isVisible: false,\n      },\n    ],\n    []\n  );\n  // const memodata = React.useMemo(() => data, [data])\n\n  const getCityOptions = function () {\n    if (indianstate) {\n      if (indianstate === 'all') return [];\n      else {\n        return Object.keys(resourcedict[indianstate])\n          .sort()\n          .map((x, i) => (\n            <option\n              key={i}\n              value={x}\n              style={{\n                fontFamily: 'archia',\n                fontSize: '11px !important',\n                fontWeight: 600,\n                textTransform: 'uppercase',\n              }}\n            >\n              {x}\n            </option>\n          ));\n      }\n    } else return [];\n    // return getCityList().map((x) => <option value={x}>{x}</option>)\n  };\n  const getIndianStateOptions = function () {\n    // let defaultOption = ['Please select']\n    return Object.keys(resourcedict)\n      .sort()\n      .map((x, i) => (\n        <option\n          key={i}\n          value={x}\n          style={{\n            fontFamily: 'archia',\n            fontSize: '11px !important',\n            fontWeight: 600,\n            textTransform: 'uppercase',\n          }}\n        >\n          {x}\n        </option>\n      ));\n  };\n  const getCategoryOptions = function () {\n    if (indianstate && city) {\n      if (indianstate === 'all') {\n        const array = [];\n        Object.values(resourcedict).forEach((state) => {\n          Object.values(state).forEach((citydata) => {\n            Object.keys(citydata).forEach((x) => {\n              if (array.indexOf(x) === -1) array.push(x);\n            });\n          });\n        });\n        return array.sort().map((x, i) => (\n          <option\n            key={i}\n            value={x}\n            style={{\n              fontFamily: 'archia',\n              fontSize: '11px !important',\n              fontWeight: 600,\n              textTransform: 'uppercase',\n            }}\n          >\n            {x}\n          </option>\n        ));\n      } else {\n        if (city === 'all') {\n          const array = [];\n          Object.values(resourcedict[indianstate]).forEach((citydata) => {\n            Object.keys(citydata).forEach((x) => {\n              if (array.indexOf(x) === -1) array.push(x);\n            });\n          });\n          return array.sort().map((x, i) => (\n            <option\n              key={i}\n              value={x}\n              style={{\n                fontFamily: 'archia',\n                fontSize: '11px !important',\n                fontWeight: 600,\n                textTransform: 'uppercase',\n              }}\n            >\n              {x}\n            </option>\n          ));\n        } else {\n          return Object.keys(resourcedict[indianstate][city])\n            .sort()\n            .map((x, i) => (\n              <option\n                key={i}\n                value={x}\n                style={{\n                  fontFamily: 'archia',\n                  fontSize: '11px !important',\n                  fontWeight: 600,\n                  textTransform: 'uppercase',\n                }}\n              >\n                {x}\n              </option>\n            ));\n        }\n      }\n    } else return [];\n  };\n\n  const filterTable = function () {\n    let a = [];\n    if (category === 'all') {\n      if (city === 'all') {\n        if (indianstate === 'all') {\n          Object.values(resourcedict).forEach((state) => {\n            Object.values(state).forEach((citydata) => {\n              Object.values(citydata).forEach((category) => {\n                category.forEach((x) => a.push(x));\n              });\n            });\n          });\n        } else {\n          Object.values(resourcedict[indianstate]).forEach((citydata) => {\n            Object.values(citydata).forEach((category) => {\n              category.forEach((x) => a.push(x));\n            });\n          });\n        }\n      } else {\n        Object.values(resourcedict[indianstate][city]).forEach((x) => {\n          x.forEach((y) => a.push(y));\n        });\n      }\n    } else {\n      if (indianstate === 'all' && city === 'all') {\n        Object.values(resourcedict).forEach((state) => {\n          Object.values(state).forEach((citydata) => {\n            Object.values(citydata).forEach((categorydata) => {\n              categorydata.forEach((x) => {\n                if (x.category === category) a.push(x);\n              });\n            });\n          });\n        });\n      } else if (indianstate !== 'all' && city === 'all') {\n        Object.values(resourcedict[indianstate]).forEach((citydata) => {\n          if (category in citydata) {\n            citydata[category].forEach((x) => {\n              a.push(x);\n            });\n          }\n        });\n      } else {\n        a = resourcedict[indianstate][city][category];\n      }\n    }\n    try {\n      if ('PAN India' in resourcedict) {\n        resourcedict['PAN India']['Multiple']['CoVID-19 Testing Lab'].forEach(\n          (element) => {\n            a.push(element);\n          }\n        );\n      }\n    } catch (err) {}\n    setData(a);\n    setOgData(a);\n    setPartData(a.slice(0, 30));\n    setShowTable(true);\n    try {\n      document.getElementById('input-field-searchbar').value = '';\n    } catch {}\n    setSearchValue('');\n  };\n\n  const changeIndianState = function (changedstateevent) {\n    setIndianState(changedstateevent.target.value);\n    // setCity(\n    //   Object.keys(resourcedict[changedstateevent.target.value]).sort()[0]\n    // );\n    if (changedstateevent.target.value === '') {\n      setCity('');\n      document.getElementById('cityselect1').selectedIndex = 0;\n      setCategory('');\n      document.getElementById('categoryselect').selectedIndex = 0;\n    } else {\n      setCity('all');\n      document.getElementById('cityselect1').selectedIndex = 1;\n      setCategory('all');\n      document.getElementById('categoryselect').selectedIndex = 1;\n    }\n  };\n  const changeCity = function (changedcityevent) {\n    setCity(changedcityevent.target.value);\n    setCategory('all');\n    document.getElementById('categoryselect').selectedIndex = 1;\n  };\n  const changeCategory = function (changedcategoryevent) {\n    setCategory(changedcategoryevent.target.value);\n  };\n  const appendData = function () {\n    const tempArr = partData.concat(\n      data.slice(partData.length, partData.length + 30)\n    );\n    setPartData(tempArr);\n  };\n\n  const openSharingLink = function (message) {\n    const shareUri = `https://www.addtoany.com/share#url=${encodeURI(\n      'https://www.covid19india.org/essentials'\n    )}&title=${encodeURI(message)}`;\n\n    const h = 500;\n    const w = 500;\n    const left = window.screen.width / 2 - w / 2;\n    const top = window.screen.height / 2 - h / 2;\n    return window.open(\n      shareUri,\n\n      document.title,\n      'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' +\n        w +\n        ', height=' +\n        h +\n        ', top=' +\n        top +\n        ', left=' +\n        left\n    );\n  };\n\n  const openSharingTray = function () {\n    const message =\n      'Discover nearest coronavirus support and essential service providers such as testing lab centres, accommodation shelters and vegetable vendors at ';\n    if (navigator.share !== undefined) {\n      navigator\n        .share({\n          title: document.title,\n          text: message,\n          url: 'https://www.covid19india.org/essentials',\n        })\n        .then()\n        .catch((error) => {});\n    } else {\n      openSharingLink(message);\n    }\n  };\n\n  useDebounce(\n    () => {\n      const newData = getSuggestions(searchValue, ogData);\n      setData(newData);\n      setPartData(newData.slice(0, 30));\n    },\n    300,\n    [searchValue, ogData]\n  );\n\n  return (\n    <div className=\"Resources\" id=\"top-elem\">\n      <Helmet>\n        <title>Essentials - covid19india.org</title>\n        <meta name=\"title\" content=\"Essentials - covid19india.org\" />\n      </Helmet>\n\n      <div className=\"filtersection\">\n        <div className=\"filtertitle\">\n          <h3>Service Before Self</h3>\n        </div>\n        {!isDesktop && (\n          <FiltersMobile\n            handleDisclaimerClick={handleDisclaimerClick}\n            popoverid={id}\n            isDisclaimerOpen={isDisclaimerOpen}\n            anchorEl={anchorEl}\n            handleDisclaimerClose={handleDisclaimerClose}\n            indianstate={indianstate}\n            changeIndianState={changeIndianState}\n            stateoptions={getIndianStateOptions()}\n            city={city}\n            changeCity={changeCity}\n            cityoptions={getCityOptions()}\n            category={category}\n            changeCategory={changeCategory}\n            servicesoptions={getCategoryOptions()}\n            filterTable={filterTable}\n            openSharingTray={openSharingTray}\n          />\n        )}\n        {isDesktop && (\n          <FiltersDesktop\n            handleDisclaimerClick={handleDisclaimerClick}\n            popoverid={id}\n            isDisclaimerOpen={isDisclaimerOpen}\n            anchorEl={anchorEl}\n            handleDisclaimerClose={handleDisclaimerClose}\n            indianstate={indianstate}\n            changeIndianState={changeIndianState}\n            stateoptions={getIndianStateOptions()}\n            city={city}\n            changeCity={changeCity}\n            cityoptions={getCityOptions()}\n            category={category}\n            changeCategory={changeCategory}\n            servicesoptions={getCategoryOptions()}\n            filterTable={filterTable}\n            openSharingTray={openSharingTray}\n          />\n        )}\n      </div>\n      {showTable && (\n        <React.Fragment>\n          <div className=\"searchbar\">\n            <TextField\n              id=\"input-field-searchbar\"\n              label=\"Search keyword\"\n              fullWidth={true}\n              InputLabelProps={{\n                shrink: true,\n              }}\n              style={{\n                width: '100%',\n              }}\n              variant=\"outlined\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <Icon.Search size=\"0.9em\" />\n                  </InputAdornment>\n                ),\n              }}\n              onChange={(event) => {\n                setInterval(setSearchValue(event.target.value));\n              }}\n            />\n          </div>\n          <ResourceTable\n            columns={memocols}\n            data={partData}\n            totalCount={data.length}\n            isDesktop={isDesktop}\n            onScrollUpdate={appendData}\n            searchValue={searchValue}\n          />\n          <div>\n            <Fade in={hasScrolled}>\n              <Fab\n                color=\"inherit\"\n                aria-label=\"gototop\"\n                id=\"gototopbtn\"\n                onClick={animateScroll}\n                size=\"small\"\n                style={{\n                  position: 'fixed',\n                  bottom: '1rem',\n                  right: '1rem',\n                  zIndex: '1000',\n                }}\n              >\n                <Icon.Navigation2 strokeWidth=\"2.5\" color=\"#4c75f2\" />\n              </Fab>\n            </Fade>\n          </div>\n        </React.Fragment>\n      )}\n    </div>\n  );\n}\n\nexport default Resources;\n"]},"metadata":{},"sourceType":"module"}
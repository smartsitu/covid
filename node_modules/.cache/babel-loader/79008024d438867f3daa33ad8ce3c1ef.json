{"ast":null,"code":"import tinyColor from 'tinycolor2';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar ENTROPY = 123; // Raise numbers to prevent collisions in lower indexes\n\nvar int2HexColor = function int2HexColor(num) {\n  return \"#\".concat(Math.min(num, Math.pow(2, 24)).toString(16).padStart(6, '0'));\n};\n\nvar rgb2Int = function rgb2Int(r, g, b) {\n  return (r << 16) + (g << 8) + b;\n};\n\nvar colorStr2Int = function colorStr2Int(str) {\n  var _tinyColor$toRgb = tinyColor(str).toRgb(),\n      r = _tinyColor$toRgb.r,\n      g = _tinyColor$toRgb.g,\n      b = _tinyColor$toRgb.b;\n\n  return rgb2Int(r, g, b);\n};\n\nvar checksum = function checksum(n, csBits) {\n  return n * ENTROPY % Math.pow(2, csBits);\n};\n\nvar _default = /*#__PURE__*/function () {\n  function _default() {\n    var csBits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 6;\n\n    _classCallCheck(this, _default);\n\n    this.csBits = csBits; // How many bits to reserve for checksum. Will eat away into the usable size of the registry.\n\n    this.registry = ['__reserved for background__']; // indexed objects for rgb lookup;\n  }\n\n  _createClass(_default, [{\n    key: \"register\",\n    value: function register(obj) {\n      if (this.registry.length >= Math.pow(2, 24 - this.csBits)) {\n        // color has 24 bits (-checksum)\n        return null; // Registry is full\n      }\n\n      var idx = this.registry.length;\n      var cs = checksum(idx, this.csBits);\n      var color = int2HexColor(idx + (cs << 24 - this.csBits));\n      this.registry.push(obj);\n      return color;\n    }\n  }, {\n    key: \"lookup\",\n    value: function lookup(color) {\n      var n = typeof color === 'string' ? colorStr2Int(color) : rgb2Int.apply(void 0, _toConsumableArray(color));\n      if (!n) return null; // 0 index is reserved for background\n\n      var idx = n & Math.pow(2, 24 - this.csBits) - 1; // registry index\n\n      var cs = n >> 24 - this.csBits & Math.pow(2, this.csBits) - 1; // extract bits reserved for checksum\n\n      if (checksum(idx, this.csBits) !== cs || idx >= this.registry.length) return null; // failed checksum or registry out of bounds\n\n      return this.registry[idx];\n    }\n  }]);\n\n  return _default;\n}();\n\nexport default _default;","map":{"version":3,"sources":["/Users/maclaptop/Documents/GitHub/ashokpandey.com/node_modules/canvas-color-tracker/dist/canvas-color-tracker.module.js"],"names":["tinyColor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","arr2","iter","Symbol","iterator","toString","call","from","ENTROPY","int2HexColor","num","concat","Math","min","pow","padStart","rgb2Int","r","g","b","colorStr2Int","str","_tinyColor$toRgb","toRgb","checksum","n","csBits","_default","arguments","undefined","registry","value","register","obj","idx","cs","color","push","lookup","apply"],"mappings":"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","sourcesContent":["import tinyColor from 'tinycolor2';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar ENTROPY = 123; // Raise numbers to prevent collisions in lower indexes\n\nvar int2HexColor = function int2HexColor(num) {\n  return \"#\".concat(Math.min(num, Math.pow(2, 24)).toString(16).padStart(6, '0'));\n};\n\nvar rgb2Int = function rgb2Int(r, g, b) {\n  return (r << 16) + (g << 8) + b;\n};\n\nvar colorStr2Int = function colorStr2Int(str) {\n  var _tinyColor$toRgb = tinyColor(str).toRgb(),\n      r = _tinyColor$toRgb.r,\n      g = _tinyColor$toRgb.g,\n      b = _tinyColor$toRgb.b;\n\n  return rgb2Int(r, g, b);\n};\n\nvar checksum = function checksum(n, csBits) {\n  return n * ENTROPY % Math.pow(2, csBits);\n};\n\nvar _default = /*#__PURE__*/function () {\n  function _default() {\n    var csBits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 6;\n\n    _classCallCheck(this, _default);\n\n    this.csBits = csBits; // How many bits to reserve for checksum. Will eat away into the usable size of the registry.\n\n    this.registry = ['__reserved for background__']; // indexed objects for rgb lookup;\n  }\n\n  _createClass(_default, [{\n    key: \"register\",\n    value: function register(obj) {\n      if (this.registry.length >= Math.pow(2, 24 - this.csBits)) {\n        // color has 24 bits (-checksum)\n        return null; // Registry is full\n      }\n\n      var idx = this.registry.length;\n      var cs = checksum(idx, this.csBits);\n      var color = int2HexColor(idx + (cs << 24 - this.csBits));\n      this.registry.push(obj);\n      return color;\n    }\n  }, {\n    key: \"lookup\",\n    value: function lookup(color) {\n      var n = typeof color === 'string' ? colorStr2Int(color) : rgb2Int.apply(void 0, _toConsumableArray(color));\n      if (!n) return null; // 0 index is reserved for background\n\n      var idx = n & Math.pow(2, 24 - this.csBits) - 1; // registry index\n\n      var cs = n >> 24 - this.csBits & Math.pow(2, this.csBits) - 1; // extract bits reserved for checksum\n\n      if (checksum(idx, this.csBits) !== cs || idx >= this.registry.length) return null; // failed checksum or registry out of bounds\n\n      return this.registry[idx];\n    }\n  }]);\n\n  return _default;\n}();\n\nexport default _default;\n"]},"metadata":{},"sourceType":"module"}